import{j as e}from"./ui-DHvs7Rtw.js";import{r as c}from"./vendor-BqKlwGYI.js";import{c as C,D as y,f as A,g as E,z as w,I as D,t as L,B as T,h as I,i as F,j as O,k as P,l as G,o,p as m,F as x}from"./index-BZikNEYv.js";import{T as z,a as H,b as h,c as t,d as R,e as l,D as k,f as B,g as M,h as V}from"./dialog-DEPPmxRr.js";import{f as j}from"./utils-DdJn5tvr.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=C("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Z={PENDING:"bg-yellow-100 text-yellow-800",PROCESSING:"bg-blue-100 text-blue-800",SHIPPING:"bg-purple-100 text-purple-800",COMPLETED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"},p={PENDING:"En attente",PROCESSING:"En préparation",SHIPPING:"En livraison",COMPLETED:"Livrée",CANCELLED:"Annulée"};function Y(){const[n,u]=c.useState(""),[a,N]=c.useState(null),[g,i]=c.useState(!1),f=y(s=>s.orders),{updateOrderStatus:b}=A(),{toast:d}=E(),S=f.filter(s=>s.shippingAddress.fullName.toLowerCase().includes(n.toLowerCase())||String(s.id).includes(n)),v=async(s,r)=>{try{await b(s,r),d({title:"Statut mis à jour",description:"Le statut de la commande a été mis à jour avec succès"}),i(!1)}catch{d({variant:"destructive",title:"Erreur",description:"Impossible de mettre à jour le statut de la commande"})}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Commandes"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les commandes de vos clients"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(D,{placeholder:"Rechercher une commande...",value:n,onChange:s=>u(s.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsxs(z,{children:[e.jsx(H,{children:e.jsxs(h,{children:[e.jsx(t,{children:"N° Commande"}),e.jsx(t,{children:"Client"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Total"}),e.jsx(t,{children:"Statut"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx(R,{children:S.map(s=>e.jsxs(h,{children:[e.jsxs(l,{className:"font-medium",children:["#",String(s.id).padStart(4,"0")]}),e.jsx(l,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.shippingAddress.fullName}),e.jsx("p",{className:"text-sm text-gray-500",children:s.shippingAddress.phone})]})}),e.jsx(l,{children:j(new Date(s.createdAt),"PPp",{locale:x})}),e.jsxs(l,{children:[s.total.toLocaleString()," FCFA"]}),e.jsx(l,{children:e.jsx(L,{className:Z[s.status],children:p[s.status]})}),e.jsx(l,{className:"text-right",children:e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>{N(s),i(!0)},children:e.jsx(q,{className:"h-4 w-4"})})})]},s.id))})]})}),e.jsx(k,{open:g,onOpenChange:i,children:a&&e.jsxs(B,{className:"max-w-2xl",children:[e.jsx(M,{children:e.jsxs(V,{children:["Détails de la commande #",String(a.id).padStart(4,"0")]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Statut de la commande"}),e.jsxs(I,{value:a.status,onValueChange:s=>v(a.id,s),children:[e.jsx(F,{className:"w-[200px]",children:e.jsx(O,{})}),e.jsx(P,{children:Object.entries(p).map(([s,r])=>e.jsx(G,{value:s,children:r},s))})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Commande passée le ",j(new Date(a.createdAt),"PPp",{locale:x})]})})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Articles commandés"}),e.jsxs("div",{className:"space-y-4",children:[a.items.map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Qté: ",s.quantity]})]}),e.jsxs("p",{className:"font-medium",children:[(s.price*s.quantity).toLocaleString()," FCFA"]})]},s.id)),e.jsx(m,{}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Sous-total"}),e.jsxs("span",{children:[(a.total-a.deliveryFee).toLocaleString()," FCFA"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Frais de livraison"}),e.jsxs("span",{children:[a.deliveryFee.toLocaleString()," FCFA"]})]}),e.jsx(m,{}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:[a.total.toLocaleString()," FCFA"]})]})]})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Informations de livraison"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nom:"})," ",a.shippingAddress.fullName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone:"})," ",a.shippingAddress.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Adresse:"})," ",a.shippingAddress.address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Ville:"})," ",a.shippingAddress.city]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Zone:"})," ",a.shippingAddress.zone]})]})]})]})]})})]})}export{Y as default};
//# sourceMappingURL=Orders-DbudY5wJ.js.map
