import{j as e}from"./ui-DHvs7Rtw.js";import{r as o,i as g,u as N}from"./vendor-BqKlwGYI.js";import{w as y,g as b,o as L,I as d,B as m,L as P}from"./index-BZikNEYv.js";import{L as u}from"./label-CGDRo2T5.js";import{L as p}from"./lock-B_brf4yP.js";import{A as C}from"./arrow-left-xw5BdMCh.js";import"./utils-DdJn5tvr.js";function B(){const[a,h]=o.useState(""),[i,x]=o.useState(""),[t,n]=o.useState(!1),[f]=g(),l=N(),{updatePassword:v}=y(),{toast:r}=b(),c=f.get("token"),j=async s=>{if(s.preventDefault(),!c){r({variant:"destructive",title:"Erreur",description:"Token de réinitialisation manquant"});return}if(a!==i){r({variant:"destructive",title:"Erreur",description:"Les mots de passe ne correspondent pas"});return}if(a.length<6){r({variant:"destructive",title:"Erreur",description:"Le mot de passe doit contenir au moins 6 caractères"});return}n(!0);try{await v(c,a),l("/login")}catch(w){r({variant:"destructive",title:"Erreur",description:w.message})}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 to-white flex items-center justify-center p-4",children:e.jsxs(L,{className:"w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Nouveau mot de passe"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Choisissez votre nouveau mot de passe"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",children:"Nouveau mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(d,{id:"password",type:"password",value:a,onChange:s=>h(s.target.value),className:"pl-10",placeholder:"••••••••",required:!0,disabled:t,minLength:6})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(d,{id:"confirmPassword",type:"password",value:i,onChange:s=>x(s.target.value),className:"pl-10",placeholder:"••••••••",required:!0,disabled:t,minLength:6})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{type:"submit",className:"w-full",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise à jour..."]}):"Mettre à jour le mot de passe"}),e.jsxs(m,{type:"button",variant:"ghost",className:"w-full",onClick:()=>l("/login"),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})]})]})]})})}export{B as default};
//# sourceMappingURL=UpdatePassword-nFCkYlA2.js.map
