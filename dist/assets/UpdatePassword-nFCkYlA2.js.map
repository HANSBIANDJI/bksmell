{"version":3,"file":"UpdatePassword-nFCkYlA2.js","sources":["../../src/pages/UpdatePassword.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card } from '@/components/ui/card';\nimport { Lock, Loader2, ArrowLeft } from 'lucide-react';\nimport { useToast } from '@/components/ui/use-toast';\n\nexport default function UpdatePassword() {\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { updatePassword } = useAuth();\n  const { toast } = useToast();\n\n  const token = searchParams.get('token');\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!token) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erreur\",\n        description: \"Token de réinitialisation manquant\"\n      });\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erreur\",\n        description: \"Les mots de passe ne correspondent pas\"\n      });\n      return;\n    }\n\n    if (password.length < 6) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erreur\",\n        description: \"Le mot de passe doit contenir au moins 6 caractères\"\n      });\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      await updatePassword(token, password);\n      navigate('/login');\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erreur\",\n        description: error.message\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-purple-50 to-white flex items-center justify-center p-4\">\n      <Card className=\"w-full max-w-md p-8\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-2xl font-bold\">Nouveau mot de passe</h1>\n          <p className=\"text-sm text-muted-foreground mt-2\">\n            Choisissez votre nouveau mot de passe\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Nouveau mot de passe</Label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <Input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"pl-10\"\n                placeholder=\"••••••••\"\n                required\n                disabled={isLoading}\n                minLength={6}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"confirmPassword\">Confirmer le mot de passe</Label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <Input\n                id=\"confirmPassword\"\n                type=\"password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                className=\"pl-10\"\n                placeholder=\"••••••••\"\n                required\n                disabled={isLoading}\n                minLength={6}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Mise à jour...\n                </>\n              ) : (\n                'Mettre à jour le mot de passe'\n              )}\n            </Button>\n\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              className=\"w-full\"\n              onClick={() => navigate('/login')}\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Retour à la connexion\n            </Button>\n          </div>\n        </form>\n      </Card>\n    </div>\n  );\n}"],"names":["UpdatePassword","password","setPassword","useState","confirmPassword","setConfirmPassword","isLoading","setIsLoading","searchParams","useSearchParams","navigate","useNavigate","updatePassword","useAuth","toast","useToast","token","handleSubmit","e","error","jsxs","Card","jsx","Label","Lock","Input","Button","Fragment","Loader2","ArrowLeft"],"mappings":"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"}