import{j as e}from"./ui-DHvs7Rtw.js";import{r as m}from"./vendor-BqKlwGYI.js";import{B as t,X as H,u as J,y as W,z as X,I as c,t as F,h as f,i as C,j as b,k,l as S}from"./index-BZikNEYv.js";import{T as $,a as K,b as O,c as o,d as Q,e as h,D,f as T,g as A,h as z}from"./dialog-DEPPmxRr.js";import{L as a}from"./label-CGDRo2T5.js";import{T as I}from"./textarea-BGYsLcLq.js";import{S as j}from"./switch-B75tC02L.js";import{u as Y,U as Z}from"./index-B6zeNCV_.js";import{S as _}from"./square-pen-DI8ReuSK.js";import{T as ee}from"./trash-2-CroxI1IH.js";import"./utils-DdJn5tvr.js";import"./index-BbiSjUZh.js";function L({value:v,onChange:g}){const y=m.useCallback(async p=>{try{const d=p[0];if(!d)return;const u=URL.createObjectURL(d);g(u),console.log("File selected:",d.name)}catch(d){console.error("Error handling file:",d)}},[g]),{getRootProps:w,getInputProps:P,isDragActive:x}=Y({onDrop:y,accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},maxSize:5*1024*1024,multiple:!1});return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{...w(),className:`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ${x?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-500"}`,children:[e.jsx("input",{...P()}),v?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v,alt:"Preview",className:"mx-auto h-48 object-cover rounded-lg"}),e.jsx(t,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:p=>{p.stopPropagation(),g("")},children:e.jsx(H,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Z,{className:"h-8 w-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:x?"Déposez l'image ici":"Glissez une image ou cliquez pour sélectionner"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG ou WEBP jusqu'à 5MB"})]})]})})}const R=["Pour Elle","Pour Lui","Unisexe"];function ue(){const{products:v,brands:g,addProduct:y,updateProduct:w,deleteProduct:P}=J(),[x,p]=m.useState(""),[d,u]=m.useState(!1),[q,N]=m.useState(!1),[r,n]=m.useState(null),[i,l]=m.useState({name:"",brand:"",price:0,category:"",description:"",image:"",isNew:!1,isOnSale:!1,discount:0,stock:0,isFeatured:!1}),E=g.filter(s=>s.active).map(s=>s.name),B=v.filter(s=>s.name.toLowerCase().includes(x.toLowerCase())||s.brand.toLowerCase().includes(x.toLowerCase())),M=async()=>{try{await y(i),u(!1),l({name:"",brand:"",price:0,category:"",description:"",image:"",isNew:!1,isOnSale:!1,discount:0,stock:0,isFeatured:!1})}catch(s){console.error("Error adding product:",s)}},U=async()=>{if(r)try{await w(r.id,r),N(!1),n(null)}catch(s){console.error("Error updating product:",s)}},G=async s=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce produit ?"))try{await P(s)}catch(V){console.error("Error deleting product:",V)}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Produits"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez votre catalogue de produits"})]}),e.jsxs(t,{onClick:()=>u(!0),children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Ajouter un produit"]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(c,{placeholder:"Rechercher un produit...",value:x,onChange:s=>p(s.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsxs($,{children:[e.jsx(K,{children:e.jsxs(O,{children:[e.jsx(o,{children:"Nom"}),e.jsx(o,{children:"Marque"}),e.jsx(o,{children:"Catégorie"}),e.jsx(o,{children:"Prix"}),e.jsx(o,{children:"Stock"}),e.jsx(o,{children:"Statut"}),e.jsx(o,{className:"text-right",children:"Actions"})]})}),e.jsx(Q,{children:B.map(s=>e.jsxs(O,{children:[e.jsx(h,{className:"font-medium",children:s.name}),e.jsx(h,{children:s.brand}),e.jsx(h,{children:s.category}),e.jsxs(h,{children:[s.price.toLocaleString()," FCFA"]}),e.jsx(h,{children:s.stock}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-2",children:[s.isNew&&e.jsx(F,{children:"Nouveau"}),s.isOnSale&&e.jsxs(F,{variant:"destructive",children:["-",s.discount,"%"]}),s.isFeatured&&e.jsx(F,{variant:"secondary",children:"En avant"})]})}),e.jsxs(h,{className:"text-right",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>{n(s),N(!0)},children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx(t,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>G(s.id),children:e.jsx(ee,{className:"h-4 w-4"})})]})]},s.id))})]})}),e.jsx(D,{open:d,onOpenChange:u,children:e.jsxs(T,{className:"max-w-2xl",children:[e.jsx(A,{children:e.jsx(z,{children:"Ajouter un produit"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"name",children:"Nom"}),e.jsx(c,{id:"name",value:i.name,onChange:s=>l({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"brand",children:"Marque"}),e.jsxs(f,{value:i.brand,onValueChange:s=>l({...i,brand:s}),children:[e.jsx(C,{children:e.jsx(b,{placeholder:"Sélectionner une marque"})}),e.jsx(k,{children:E.map(s=>e.jsx(S,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"price",children:"Prix"}),e.jsx(c,{id:"price",type:"number",value:i.price,onChange:s=>l({...i,price:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"category",children:"Catégorie"}),e.jsxs(f,{value:i.category,onValueChange:s=>l({...i,category:s}),children:[e.jsx(C,{children:e.jsx(b,{placeholder:"Sélectionner une catégorie"})}),e.jsx(k,{children:R.map(s=>e.jsx(S,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"description",children:"Description"}),e.jsx(I,{id:"description",value:i.description,onChange:s=>l({...i,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"image",children:"Image du produit"}),e.jsx(L,{value:i.image,onChange:s=>l({...i,image:s})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"stock",children:"Stock"}),e.jsx(c,{id:"stock",type:"number",value:i.stock,onChange:s=>l({...i,stock:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"discount",children:"Réduction (%)"}),e.jsx(c,{id:"discount",type:"number",value:i.discount,onChange:s=>l({...i,discount:Number(s.target.value)}),disabled:!i.isOnSale})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:i.isNew,onCheckedChange:s=>l({...i,isNew:s})}),e.jsx(a,{children:"Nouveau produit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:i.isOnSale,onCheckedChange:s=>l({...i,isOnSale:s})}),e.jsx(a,{children:"En promotion"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:i.isFeatured,onCheckedChange:s=>l({...i,isFeatured:s})}),e.jsx(a,{children:"Mettre en avant"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(t,{variant:"outline",onClick:()=>u(!1),children:"Annuler"}),e.jsx(t,{onClick:M,children:"Ajouter"})]})]})}),e.jsx(D,{open:q,onOpenChange:N,children:r&&e.jsxs(T,{className:"max-w-2xl",children:[e.jsx(A,{children:e.jsx(z,{children:"Modifier le produit"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-name",children:"Nom"}),e.jsx(c,{id:"edit-name",value:r.name,onChange:s=>n({...r,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-brand",children:"Marque"}),e.jsxs(f,{value:r.brand,onValueChange:s=>n({...r,brand:s}),children:[e.jsx(C,{children:e.jsx(b,{placeholder:"Sélectionner une marque"})}),e.jsx(k,{children:E.map(s=>e.jsx(S,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-price",children:"Prix"}),e.jsx(c,{id:"edit-price",type:"number",value:r.price,onChange:s=>n({...r,price:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-category",children:"Catégorie"}),e.jsxs(f,{value:r.category,onValueChange:s=>n({...r,category:s}),children:[e.jsx(C,{children:e.jsx(b,{placeholder:"Sélectionner une catégorie"})}),e.jsx(k,{children:R.map(s=>e.jsx(S,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-description",children:"Description"}),e.jsx(I,{id:"edit-description",value:r.description,onChange:s=>n({...r,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-image",children:"Image du produit"}),e.jsx(L,{value:r.image,onChange:s=>n({...r,image:s})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-stock",children:"Stock"}),e.jsx(c,{id:"edit-stock",type:"number",value:r.stock,onChange:s=>n({...r,stock:Number(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"edit-discount",children:"Réduction (%)"}),e.jsx(c,{id:"edit-discount",type:"number",value:r.discount,onChange:s=>n({...r,discount:Number(s.target.value)}),disabled:!r.isOnSale})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:r.isNew,onCheckedChange:s=>n({...r,isNew:s})}),e.jsx(a,{children:"Nouveau produit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:r.isOnSale,onCheckedChange:s=>n({...r,isOnSale:s})}),e.jsx(a,{children:"En promotion"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{checked:r.isFeatured,onCheckedChange:s=>n({...r,isFeatured:s})}),e.jsx(a,{children:"Mettre en avant"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(t,{variant:"outline",onClick:()=>N(!1),children:"Annuler"}),e.jsx(t,{onClick:U,children:"Enregistrer"})]})]})})]})}export{ue as default};
//# sourceMappingURL=Products-C6mOJtmv.js.map
