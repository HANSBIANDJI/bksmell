import{j as e}from"./ui-DHvs7Rtw.js";import{r as m}from"./vendor-BqKlwGYI.js";import{F as f,J as j,o as p,I as d,B as b,T as g,d as D}from"./index-BZikNEYv.js";import{L as o}from"./label-CGDRo2T5.js";import{S as w}from"./switch-B75tC02L.js";import{p as x,i as c,f as v}from"./utils-DdJn5tvr.js";function y(t,r="dd/MM/yyyy 'à' HH:mm"){try{const i=typeof t=="string"?x(t):t;if(!c(i))throw new Error("Invalid date");return v(i,r,{locale:f})}catch(i){return console.error("Error formatting date:",i),""}}function N(t){try{const r=new Date(t);return c(r)&&r>new Date}catch{return!1}}function u(t){try{const r=x(t);return c(r)?r.toISOString().slice(0,16):new Date().toISOString().slice(0,16)}catch{return new Date().toISOString().slice(0,16)}}function L(){const{settings:t,updateSettings:r,isLoading:i}=j(),[s,l]=m.useState({isEnabled:t.isEnabled,endDate:u(t.endDate),title:t.title,description:t.description});m.useEffect(()=>{l({isEnabled:t.isEnabled,endDate:u(t.endDate),title:t.title,description:t.description})},[t]);const h=async a=>{a.preventDefault();try{if(!N(s.endDate))throw new Error("La date de fin doit être supérieure à la date actuelle");await r({...s,endDate:new Date(s.endDate).toISOString()})}catch(n){console.error("Error updating countdown:",n)}};return e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Compte à rebours"}),e.jsx("p",{className:"text-muted-foreground",children:"Gérez les paramètres du compte à rebours"})]})}),e.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[e.jsx(p,{className:"p-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"isEnabled",children:"Activer le compte à rebours"}),e.jsx(w,{id:"isEnabled",checked:s.isEnabled,onCheckedChange:a=>l(n=>({...n,isEnabled:a}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"title",children:"Titre"}),e.jsx(d,{id:"title",value:s.title,onChange:a=>l(n=>({...n,title:a.target.value})),placeholder:"ex: Vente Flash"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(d,{id:"description",value:s.description,onChange:a=>l(n=>({...n,description:a.target.value})),placeholder:"ex: Profitez de nos offres exceptionnelles"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"endDate",children:"Date de fin"}),e.jsx(d,{id:"endDate",type:"datetime-local",value:s.endDate,onChange:a=>l(n=>({...n,endDate:a.target.value})),min:new Date().toISOString().slice(0,16)})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:i,children:i?"Mise à jour...":"Enregistrer les modifications"})]})}),e.jsxs(p,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Aperçu"}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 p-6 rounded-xl text-white",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("h3",{className:"text-xl font-bold",children:s.title})]}),e.jsx("p",{className:"text-sm text-center mb-4",children:s.description}),s.isEnabled&&e.jsx(D,{endDate:new Date(s.endDate).toISOString(),isActive:s.isEnabled})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4 text-center",children:["Le compte à rebours se terminera le ",y(s.endDate)]})]})]})]})}export{L as default};
//# sourceMappingURL=CountdownSettings-Ce3FrzQG.js.map
